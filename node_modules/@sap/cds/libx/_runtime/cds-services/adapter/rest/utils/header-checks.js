const getError = require('../../../../common/error')

const contentTypeCheck = req => {
  const contentType = req.headers['content-type'] && req.headers['content-type'].split(';')
  if (
    contentType &&
    (!contentType[0].match(/^application\/json$/) || (typeof contentType[1] === 'string' && !contentType[1]))
  ) {
    throw getError(415, 'INVALID_CONTENT_TYPE_ONLY_JSON')
  }
}
module.exports = {
  contentTypeCheck
}
